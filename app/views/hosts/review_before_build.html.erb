<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <%= alert_close("modal") %>
      <h4 class="modal-title"><%= _('Review build status for %s.') % @host %></h4>

    </div>
    <div class="modal-body">
      <div class="alert alert-<%= build_state(@build) %>">
        <p>
          <b>
            <% if @build.state %>
              <%= icon_text('ok', _('Build checks passed, ready to build')) %>
            <% else %>
              <%= icon_text('remove', _('The following errors may prevent a successful build:')) %>
            <% end %>
          </b>
        </p>

        <p>

         <% HostBuildStatus::VALIDATION_TYPES.each do |type| %>
            <% if @build.errors[type].any? %>
            <p><%= _(type.to_s.capitalize) %></p>
            <ul class="list-group">
              <% @build.errors[type].each do |error| %>
                <%= render :partial => 'hosts/build_review_status', :locals => { :error => error } %>
              <% end %>
            </ul>
            <p>
          <% end %>
        <% end %>
      </div>
      <div class="alert alert-warning">
        <b><%= _("Rebuild %s on next reboot?") % @host %></b><br/>
        <%= _("This will delete all of the host's stored facts and reports.") %>
      </div>

      <%= form_for :build, :method => :put,
                         :url            => hash_for_setBuild_host_path(:id => @host).merge(:auth_object => @host, :permission => 'build_hosts'),
                         :html           => { :id => "build_form" } do |form|
        %>
        <div>
          <%= check_box_tag(:build_reboot, true, false) %> <%= _("Reboot now?") %>
        </div>
        <div class="modal-footer">
          <%= modal_close %>
          <%= review_build_button(form, build_state(@build)) %>
        </div>
      <% end %>
    </div>
  </div>
</div>

